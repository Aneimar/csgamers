/* Plugin generated by AMXX-Studio */

#include <   amxmodx   >
#include <     fun     >
#include <   fakemeta  >

#define PLUGIN   "HP & AP Limit"
#define VERSION       "1.0"
#define AUTHOR       "EnTeR_"

new TerroHealthLimit, TerroArmorLimit, CTHealthLimit, CTArmorLimit;

public plugin_init (  ) 
{
	register_plugin ( PLUGIN, VERSION, AUTHOR )
	
	register_forward ( FM_PlayerPreThink, "fwPlayerPreThink" );
	
	TerroHealthLimit = register_cvar ( "terro_health_limit", "150" );
	
	TerroArmorLimit = register_cvar ( "terro_armor_limit", "150" );
	
	CTHealthLimit = register_cvar ( "ct_health_limit", "150" );
	
	CTArmorLimit = register_cvar ( "ct_armor_limit", "150" );
}

public fwPlayerPreThink ( id )
{
	new CurrentHealth = get_user_health ( id );
	
	new CurrentArmor = get_user_armor ( id );
	
	if ( get_user_team ( id ) == 1 )
	{
		new T_HealthLimit = get_pcvar_num ( TerroHealthLimit );
		
		new T_ArmorLimit = get_pcvar_num ( TerroArmorLimit );
		
		if ( CurrentHealth > T_HealthLimit )
		{
			CurrentHealth = T_HealthLimit
			
			set_user_health ( id, CurrentHealth );
			
			client_print ( id, print_chat, "[System] Ai atins limita HP-ului. Valoarea setata este de: %d HP", T_HealthLimit ); 
		}
		
		if ( CurrentArmor > T_ArmorLimit ) 
		{
			CurrentArmor = T_ArmorLimit
			
			set_user_armor ( id, CurrentArmor );
			
			client_print ( id, print_chat, "[System] Ai atins limita AP-ului. Valoarea setata este de: %d AP", T_ArmorLimit );
		}
	}
	
	if ( get_user_team ( id ) == 2 )
	{
		new CT_HealthLimit = get_pcvar_num ( CTHealthLimit );
		
		new CT_ArmorLimit = get_pcvar_num ( CTArmorLimit );
		
		if ( CurrentHealth > CT_HealthLimit ) 
		{
			CurrentHealth = CT_HealthLimit
			
			set_user_health ( id, CurrentHealth );
			
			client_print ( id, print_chat, "[System] Ai atins limita HP-ului. Valoarea setata este de: %d HP", CT_HealthLimit );   
		}
	          
		if ( CurrentArmor > CT_ArmorLimit ) 
		{
			CurrentArmor = CT_ArmorLimit
			
			set_user_armor ( id, CurrentArmor );
			
			client_print ( id, print_chat, "[System] Ai atins limita AP-ului. Valoarea setata este de: %d AP", CT_ArmorLimit );
		
		}
	}
}
